<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Songs from the Shuttered — Gallery</title>

  <style>
    :root{
      --bg:#0f1113;
      --card:#0b0c0d;
      --muted:#9aa0a6;
      --accent:#e6e6e6;
      --gap:18px;
      --rows:4;
      --row-height:190px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,#070708 0%, #0f1113 100%);
      color:var(--accent);
      padding:36px;
      display:flex;
      justify-content:center;
    }

    .wrap{
      width:100%;
      max-width:1200px;
    }

    header{
      margin-bottom:18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:18px;
      flex-wrap:wrap;
    }

    h1{
      margin:0;
      font-weight:600;
    }

    p.lead{
      margin:0;
      color:var(--muted);
      font-size:0.95rem;
    }

    .close-btn{
      background:transparent;
      border:1px solid rgba(255,255,255,0.08);
      color:var(--accent);
      padding:8px 14px;
      border-radius:6px;
      cursor:pointer;
      font-size:0.9rem;
    }

    /* Grid */
    .grid{
      display:grid;
      grid-auto-flow:column;
      grid-auto-columns:minmax(220px,1fr);
      grid-template-rows:repeat(var(--rows), var(--row-height));
      gap:var(--gap);
    }

    figure{
      margin:0;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:8px;
      overflow:hidden;
      box-shadow:0 6px 18px rgba(2,6,10,0.6);
      cursor:pointer;
      transition:transform 160ms ease, box-shadow 160ms ease;
      display:flex;
      flex-direction:column;
      height:100%;
    }

    figure:hover{
      transform:translateY(-6px);
      box-shadow:0 18px 36px rgba(2,6,10,0.7);
    }

    .thumb{
      flex:1;
      position:relative;
      background:#000;
    }

    .thumb img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
    }

    figcaption{
      padding:10px 12px;
      font-size:0.9rem;
      color:var(--muted);
      border-top:1px solid rgba(255,255,255,0.03);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* Modal (shared) */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(2,4,6,0.8);
      z-index:1000;
      padding:24px;
    }

    .modal.open{ display:flex; }

    .modal-content{
      max-width:92%;
      max-height:92%;
      background:var(--card);
      border-radius:8px;
      overflow:hidden;
      box-shadow:0 30px 80px rgba(2,4,6,0.7);
      display:flex;
      flex-direction:column;
    }

    .modal-img{
      width:100%;
      height:calc(92vh - 120px);
      object-fit:contain;
      background:#000;
    }

    .modal-footer{
      padding:12px 14px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    /* Contact form styles */
    .contact-body{
      padding:18px;
      color:var(--muted);
      min-width:320px;
      max-width:720px;
    }
    .contact-body label{
      display:block;
      font-size:0.9rem;
      margin:8px 0 6px;
      color:var(--muted);
    }
    .contact-body input[type="text"],
    .contact-body input[type="email"],
    .contact-body textarea{
      width:100%;
      padding:10px;
      border-radius:6px;
      border:1px solid rgba(255,255,255,0.06);
      background:transparent;
      color:var(--accent);
      font-size:0.95rem;
      box-sizing:border-box;
    }
    .contact-actions{
      display:flex;
      gap:8px;
      justify-content:flex-end;
      padding:12px 18px 18px;
    }

    /* Contact modal specific */
    .email-list{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:8px;
    }
    .email-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .email-text{
      background:rgba(255,255,255,0.02);
      border:1px solid rgba(255,255,255,0.04);
      padding:12px 14px;
      border-radius:8px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
      color:var(--accent);
      font-size:1rem;
      overflow-wrap:anywhere;
      flex:1;
    }
    .email-actions{
      display:flex;
      gap:8px;
      margin-left:12px;
      white-space:nowrap;
    }

    .contact-actions .close-btn{
      border-radius:6px;
    }
    .muted-small{
      color:var(--muted);
      font-size:0.95rem;
    }

    @media (max-width:920px){
      :root{ --row-height:160px; }
    }

    @media (max-width:640px){
      :root{ --row-height:120px; }
      .grid{ grid-auto-columns:minmax(140px,1fr); }
      .email-row{ flex-direction:column; align-items:flex-start; }
      .email-actions{ margin-left:0; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Songs from the Shuttered</h1>
        <p class="lead">Fine art project dedicated to songs.</p>
      </div>
      <div style="display:flex; gap:10px; align-items:center;">
        <button id="bookBtn" class="close-btn" aria-label="Open book PDF">Read Book</button>
        <button id="aboutBtn" class="close-btn">About</button>
        <button id="contactBtn" class="close-btn">Contact</button>
             </div>
    </header>

    <main>
      <section class="grid" id="gallery"></section>
    </main>
  </div>

  <!-- Image Modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <img id="modalImg" class="modal-img" src="" alt="">
      <div class="modal-footer">
        <div id="modalCaption"></div>
        <button id="closeBtn" class="close-btn">Close</button>
      </div>
    </div>
  </div>

  <!-- About Modal -->
  <div id="aboutModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <div style="padding:20px; line-height:1.6;">
        <h2>About</h2>
        <p>
Created by Tomer Jacobson & Maxim Golovanov, <br>
          "Songs from the Shuttered" is a fusion of visual art and music that seeks to explore the symbiotic relationship between the two disciplines. 
        </p>
        <p>
        Through staged models, lighting and dynamic compositions, each photograph offers a captivating examination of different song lyrics. Drawing from classical art references, this collection prom[...]
        </p>
        <button id="aboutCloseBtn" class="close-btn">Close</button>
      </div>
    </div>
  </div>

  <!-- Contact Modal (updated to show multiple contacts) -->
  <div id="contactModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <div class="contact-body">
        <h2>Contact</h2>
        <p class="muted-small">For inquiries, commissions, or press — reach out via email:</p>

        <div id="emailsList" class="email-list" aria-live="polite"></div>

        <div class="contact-actions" style="margin-top:12px;">
          <div style="flex:1"></div>
          <button id="contactCloseBtn" class="close-btn">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const images = [
      "Her lies.jpg",
      "The Power of love.jpg",
      "Hallowed be thy name.jpg",
      "society.jpg",
      "Fake Empire.jpg",
      "Where to now St. Peter.jpg",
      "After the gold rush.jpg",
      "Mercy Seat.jpg",
      "I am waiting for my man.jpg",
      "Weak.jpg",
      "Cortez the killer.jpg",
      "Flume.jpg",
      "Hey Joe.jpg",
      "The good son.jpg",
      "One more cup of coffee.jpg",
      "Lost in the flood.jpg"
    ];

    const gallery = document.getElementById('gallery');
    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modalImg');
    const modalCaption = document.getElementById('modalCaption');
    const closeBtn = document.getElementById('closeBtn');

    const aboutBtn = document.getElementById('aboutBtn');
    const aboutModal = document.getElementById('aboutModal');
    const aboutCloseBtn = document.getElementById('aboutCloseBtn');

    const bookBtn = document.getElementById('bookBtn');

    // Contact elements (updated)
    const contactBtn = document.getElementById('contactBtn');
    const contactModal = document.getElementById('contactModal');
    const contactCloseBtn = document.getElementById('contactCloseBtn');
    const emailsList = document.getElementById('emailsList');

    const CONTACT_EMAILS = [
      'tomer.jacobson@gmail.com',
      'maxim.golovanov.1990@gmail.com'
    ];

    function captionFromFilename(name){
      return name.replace(/\.[^.]+$/, '').trim();
    }

    images.forEach(name => {
      const fig = document.createElement('figure');
      fig.innerHTML = `
        <div class="thumb">
          <img src="images/${encodeURI(name)}" alt="${captionFromFilename(name)}">
        </div>
        <figcaption>${captionFromFilename(name)}</figcaption>
      `;

      fig.addEventListener('click', () => {
        modalImg.src = 'images/' + encodeURI(name);
        modalCaption.textContent = captionFromFilename(name);
        openModal(modal);
      });

      gallery.appendChild(fig);
    });

    function openModal(el){
      if (!el) return;
      el.classList.add('open');
      el.setAttribute('aria-hidden', 'false');
    }

    function closeModal(el){
      if (!el) return;
      el.classList.remove('open');
      el.setAttribute('aria-hidden', 'true');
    }

    function closeImageModal(){
      closeModal(modal);
      modalImg.src = '';
    }

    closeBtn.onclick = closeImageModal;
    modal.onclick = e => e.target === modal && closeImageModal();

    aboutBtn.onclick = () => openModal(aboutModal);
    aboutCloseBtn.onclick = () => closeModal(aboutModal);
    aboutModal.onclick = e => e.target === aboutModal && closeModal(aboutModal);

    // Open the uploaded PDF (SFTS.pdf) when Book is clicked.
    bookBtn.addEventListener('click', () => {
      // The PDF is expected to be in the site root (same directory as index.html).
      const win = window.open('SFTS.pdf', '_blank');
      if (win) win.opener = null;
    });

    // Render contact emails into the modal (creates per-email actions)
    function renderContactEmails() {
      emailsList.innerHTML = '';
      CONTACT_EMAILS.forEach(email => {
        const row = document.createElement('div');
        row.className = 'email-row';

        const text = document.createElement('div');
        text.className = 'email-text';
        text.textContent = email;

        const actions = document.createElement('div');
        actions.className = 'email-actions';

        const copyBtn = document.createElement('button');
        copyBtn.className = 'close-btn';
        copyBtn.type = 'button';
        copyBtn.textContent = 'Copy';
        copyBtn.title = 'Copy email to clipboard';
        copyBtn.addEventListener('click', async () => {
          try {
            await navigator.clipboard.writeText(email);
            const prev = copyBtn.textContent;
            copyBtn.textContent = 'Copied!';
            setTimeout(() => copyBtn.textContent = prev, 1500);
          } catch (err) {
            // fallback
            try {
              const range = document.createRange();
              range.selectNode(text);
              window.getSelection().removeAllRanges();
              window.getSelection().addRange(range);
              document.execCommand('copy');
              window.getSelection().removeAllRanges();
              const prev = copyBtn.textContent;
              copyBtn.textContent = 'Copied!';
              setTimeout(() => copyBtn.textContent = prev, 1500);
            } catch (e) {
              alert('Unable to copy email automatically. Please copy: ' + email);
            }
          }
        });

        const openBtn = document.createElement('button');
        openBtn.className = 'close-btn';
        openBtn.type = 'button';
        openBtn.textContent = 'Open in Mail App';
        openBtn.title = 'Open your mail app';
        openBtn.addEventListener('click', () => {
          const mailto = `mailto:${encodeURIComponent(email)}`;
          const win = window.open(mailto, '_blank');
          if (win) win.opener = null;
        });

        actions.appendChild(copyBtn);
        actions.appendChild(openBtn);

        row.appendChild(text);
        row.appendChild(actions);

        emailsList.appendChild(row);
      });
    }

    // Contact modal behaviour
    contactBtn.onclick = () => {
      renderContactEmails();
      openModal(contactModal);
    };
    contactCloseBtn.onclick = () => closeModal(contactModal);
    contactModal.onclick = e => e.target === contactModal && closeModal(contactModal);

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape'){
        closeImageModal();
        closeModal(aboutModal);
        closeModal(contactModal);
      }
    });
  </script>
</body>
</html>
